version: 1
frontend:
  phases:
    # ----------------------------------------------------
    # 1. ì„¤ì¹˜ (preBuild): frontend/appìœ¼ë¡œ ì´ë™ í›„ ì˜ì¡´ì„± ì„¤ì¹˜
    # ----------------------------------------------------
    preBuild:
      commands:
        # ğŸ’¡ ì‘ì—… ë””ë ‰í„°ë¦¬ë¥¼ package.jsonì´ ìˆëŠ” ê³³ìœ¼ë¡œ ì´ë™
        - cd frontend/app
        # ğŸ’¡ ì˜ì¡´ì„± ì„¤ì¹˜ (Lockfileì´ ì—†ì–´ë„ ì‹¤í–‰ ê°€ëŠ¥í•œ npm install ì‚¬ìš©)
        - npm install
    
    # ----------------------------------------------------
    # 2. ë¹Œë“œ (build): ë™ì¼ ë””ë ‰í† ë¦¬ì—ì„œ ë¹Œë“œ ëª…ë ¹ì–´ ì‹¤í–‰
    # ----------------------------------------------------
    build:
      commands:
        # ğŸ’¡ ì´ë¯¸ frontend/app ì•ˆì— ìˆìœ¼ë¯€ë¡œ cd ëª…ë ¹ì€ ë¶ˆí•„ìš”.
        - npm run build
  
  # ----------------------------------------------------
  # 3. ì•„í‹°íŒ©íŠ¸ (artifacts): ê²°ê³¼ë¬¼ì´ ì €ì¥ëœ í´ë” ì§€ì •
  # ----------------------------------------------------
  artifacts:
    # ğŸ’¡ ë¹Œë“œ ê²°ê³¼ë¬¼(out)ì€ ë¦¬í¬ì§€í† ë¦¬ ë£¨íŠ¸ ê¸°ì¤€ frontend/app/outì— ìœ„ì¹˜í•¨
    baseDirectory: frontend/app/out 
    files:
      - '**/*'
      
  # ----------------------------------------------------
  # 4. ìºì‹œ: node_modules í´ë” ìºì‹±ìœ¼ë¡œ ë¹Œë“œ ì†ë„ ê°œì„ 
  # ----------------------------------------------------
  cache:
    paths:
      - frontend/app/node_modules/**/*